mode: rule
mixed-port: 7890
allow-lan: false
log-level: info
ipv6: true
unified-delay: true
# å¤–éƒ¨æ§åˆ¶
external-controller: 127.0.0.1:9090
# geo æ•°æ®æ›´æ–°
geo-auto-update: true # æ˜¯å¦è‡ªåŠ¨æ›´æ–° geodata
geo-update-interval: 24 # æ›´æ–°é—´éš”ï¼Œå•ä½ï¼šå°æ—¶

rules:
  # ä¸ªäººä½¿ç”¨åœºæ™¯åˆ†æµè§„åˆ™
  - DOMAIN-SUFFIX,cloudns.be,èŠ‚ç‚¹é€‰æ‹©
  # é€šç”¨åˆ†æµè§„åˆ™
  - GEOSITE,category-ads-all,å¹¿å‘Šè¿‡æ»¤
  - RULE-SET,anti-ad-clash,å¹¿å‘Šè¿‡æ»¤
  - RULE-SET,BanProgramAD,å¹¿å‘Šè¿‡æ»¤
  - RULE-SET,clash-rules-ad,å¹¿å‘Šè¿‡æ»¤
  - GEOSITE,openai,ChatGPT
  - GEOSITE,microsoft,MicroSoft
  - GEOSITE,apple,Apple
  - GEOSITE,google,Google
  - GEOSITE,youtube,YouTube
  - GEOSITE,netflix,NEXFLIT
  - GEOSITE,telegram,Telegram
  - GEOSITE,steam,Steam
  - RULE-SET,proxy,èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,gfw,èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,geolocation-!cn,èŠ‚ç‚¹é€‰æ‹©
  - GEOSITE,cn,DIRECT
  - GEOIP,cn,DIRECT
  - RULE-SET,applications,DIRECT
  - GEOSITE,private,DIRECT
  - RULE-SET,lancidr,DIRECT
  - MATCH,æ¼ç½‘ä¹‹é±¼


ntp:
  enable: true
  server: ntp.aliyun.com
  port: 123
  interval: 30

dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: true
  use-system-hosts: false
  respect-rules: true
  cache-algorithm: arc
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - +.lan
    - +.local
    - +.msftconnecttest.com
    - +.msftncsi.com
    - localhost.ptlogin2.qq.com
    - localhost.sec.qq.com
    - localhost.work.weixin.qq.com
  default-nameserver:
    - https://223.5.5.5/dns-query
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    - system
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  proxy-server-nameserver:
    - https://1.1.1.1/dns-query
    - https://8.8.8.8/dns-query
    - https://dns.google/dns-query
    - https://dns64.dns.google/dns-query
  nameserver-policy:
    "geosite:category-ads-all": rcode://success
    "+.cloudns.be":
      - https://1.1.1.1/dns-query
    "geosite:private,cn,geolocation-cn":
      - https://dns.alidns.com/dns-query
      - https://doh.pub/dns-query
    "geosite:google,youtube,telegram,gfw,geolocation-!cn":
      - https://1.1.1.1/dns-query
      - https://8.8.8.8/dns-query
      - https://dns.google/dns-query
      - https://dns64.dns.google/dns-query

# åŒ…å«èŠ‚ç‚¹åŠä»£ç†ç»„çš„é”šç‚¹
pr_groups:
  &pr_groups {
    type: select,
    proxies:
      [
        èŠ‚ç‚¹é€‰æ‹©,
        å»¶è¿Ÿé€‰ä¼˜,
        æ‰‹åŠ¨åˆ‡æ¢,
        æ•…éšœè½¬ç§»,
        è´Ÿè½½å‡è¡¡(æ•£åˆ—),
        è´Ÿè½½å‡è¡¡(è½®è¯¢),
        ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ç»„-è‡ªåŠ¨,
        ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹ç»„-è‡ªåŠ¨,
        ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ç»„-è‡ªåŠ¨,
        ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹ç»„-è‡ªåŠ¨,
        ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹ç»„-è‡ªåŠ¨,
        DIRECT,
        REJECT,
      ],
    url: https://www.google.com/generate_204,
    interval: 300,
    timeout: 3000,
    lazy: true,
    max-failed-times: 5,
    include-all: true,
  }

# åªåŒ…å«èŠ‚ç‚¹çš„é”šç‚¹
pr_proxies:
  &pr_proxies {
    type: url-test,
    url: https://www.google.com/generate_204,
    interval: 300,
    tolerance: 100,
    timeout: 3000,
    lazy: false,
    max-failed-times: 5,
    include-all: true,
  }

proxy-groups:
  - name: èŠ‚ç‚¹é€‰æ‹©
    <<: *pr_groups
    proxies:
      - å»¶è¿Ÿé€‰ä¼˜
      - æ‰‹åŠ¨åˆ‡æ¢
      - æ•…éšœè½¬ç§»
      - è´Ÿè½½å‡è¡¡(æ•£åˆ—)
      - è´Ÿè½½å‡è¡¡(è½®è¯¢)
      - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ç»„-è‡ªåŠ¨
      - ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹ç»„-è‡ªåŠ¨
      - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ç»„-è‡ªåŠ¨
      - ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹ç»„-è‡ªåŠ¨
      - ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹ç»„-è‡ªåŠ¨
      - DIRECT
      - REJECT
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/adjust.svg

  - name: å»¶è¿Ÿé€‰ä¼˜
    <<: *pr_proxies
    include-all-providers: true
    include-all: false
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/speed.svg

  - name: æ‰‹åŠ¨åˆ‡æ¢
    <<: *pr_proxies
    type: select
    include-all-providers: true
    include-all: false
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure@master/IconSet/Color/Clubhouse.png

  - name: æ•…éšœè½¬ç§»
    <<: *pr_proxies
    type: fallback
    include-all: true
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/ambulance.svg

  - name: è´Ÿè½½å‡è¡¡(æ•£åˆ—)
    <<: *pr_proxies
    type: load-balance
    strategy: consistent-hashing
    include-all: true
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/merry_go.svg

  - name: è´Ÿè½½å‡è¡¡(è½®è¯¢)
    <<: *pr_proxies
    type: load-balance
    strategy: round-robin
    include-all: true
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/balance.svg

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹ç»„-è‡ªåŠ¨
    <<: *pr_proxies
    filter: (?i)(é¦™æ¸¯|æ¸¯|HK|ğŸ‡­ğŸ‡°|HongKong|ğŸ‡¨ğŸ‡³)
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/hk.svg

  - name: ğŸ‡¹ğŸ‡¼ å°æ¹¾èŠ‚ç‚¹ç»„-è‡ªåŠ¨
    <<: *pr_proxies
    filter: (?i)(å°æ¹¾|æ¹¾|TW|ğŸ‡¹ğŸ‡¼|Taiwan)
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/tw.svg

  - name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹ç»„-è‡ªåŠ¨
    <<: *pr_proxies
    filter: (?i)(æ—¥æœ¬|æ—¥|JP|ğŸ‡¯ğŸ‡µ|Japan)
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/jp.svg

  - name: ğŸ‡¸ğŸ‡¬ æ–°åŠ å¡èŠ‚ç‚¹ç»„-è‡ªåŠ¨
    <<: *pr_proxies
    filter: (?i)(æ–°åŠ å¡|ç‹®|SG|ğŸ‡¸ğŸ‡¬|Singapore)
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/sg.svg

  - name: ğŸ‡ºğŸ‡¸ ç¾å›½èŠ‚ç‚¹ç»„-è‡ªåŠ¨
    <<: *pr_proxies
    filter: (?i)(ç¾å›½|ç¾|US|ğŸ‡ºğŸ‡¸|UnitedStates)
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/flags/us.svg

  - name: Google
    <<: *pr_groups
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/google.svg

  - name: YouTube
    <<: *pr_groups
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/youtube.svg

  - name: NEXFLIT
    <<: *pr_groups
    icon: https://clash-verge-rev.github.io/assets/icons/netflix.svg

  - name: Telegram
    <<: *pr_groups
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/telegram.svg

  - name: ChatGPT
    <<: *pr_groups
    filter: AD|ğŸ‡¦ğŸ‡©|AE|ğŸ‡¦ğŸ‡ª|AF|ğŸ‡¦ğŸ‡«|AG|ğŸ‡¦ğŸ‡¬|AL|ğŸ‡¦ğŸ‡±|AM|ğŸ‡¦ğŸ‡²|AO|ğŸ‡¦ğŸ‡´|AR|ğŸ‡¦ğŸ‡·|AT|ğŸ‡¦ğŸ‡¹|AU|ğŸ‡¦ğŸ‡º|AZ|ğŸ‡¦ğŸ‡¿|BA|ğŸ‡§ğŸ‡¦|BB|ğŸ‡§ğŸ‡§|BD|ğŸ‡§ğŸ‡©|BE|ğŸ‡§ğŸ‡ª|BF|ğŸ‡§ğŸ‡«|BG|ğŸ‡§ğŸ‡¬|BH|ğŸ‡§ğŸ‡­|BI|ğŸ‡§ğŸ‡®|BJ|ğŸ‡§ğŸ‡¯|BN|ğŸ‡§ğŸ‡³|BO|ğŸ‡§ğŸ‡´|BR|ğŸ‡§ğŸ‡·|BS|ğŸ‡§ğŸ‡¸|BT|ğŸ‡§ğŸ‡¹|BW|ğŸ‡§ğŸ‡¼|BZ|ğŸ‡§ğŸ‡¿|CA|ğŸ‡¨ğŸ‡¦|CD|ğŸ‡¨ğŸ‡©|CF|ğŸ‡¨ğŸ‡«|CG|ğŸ‡¨ğŸ‡¬|CH|ğŸ‡¨ğŸ‡­|CI|ğŸ‡¨ğŸ‡®|CL|ğŸ‡¨ğŸ‡±|CM|ğŸ‡¨ğŸ‡²|CO|ğŸ‡¨ğŸ‡´|CR|ğŸ‡¨ğŸ‡·|CV|ğŸ‡¨ğŸ‡»|CY|ğŸ‡¨ğŸ‡¾|CZ|ğŸ‡¨ğŸ‡¿|DE|ğŸ‡©ğŸ‡ª|DJ|ğŸ‡©ğŸ‡¯|DK|ğŸ‡©ğŸ‡°|DM|ğŸ‡©ğŸ‡²|DO|ğŸ‡©ğŸ‡´|DZ|ğŸ‡©ğŸ‡¿|EC|ğŸ‡ªğŸ‡¨|EE|ğŸ‡ªğŸ‡ª|EG|ğŸ‡ªğŸ‡¬|ER|ğŸ‡ªğŸ‡·|ES|ğŸ‡ªğŸ‡¸|ET|ğŸ‡ªğŸ‡¹|FI|ğŸ‡«ğŸ‡®|FJ|ğŸ‡«ğŸ‡¯|FM|ğŸ‡«ğŸ‡²|FR|ğŸ‡«ğŸ‡·|GA|ğŸ‡¬ğŸ‡¦|GB|ğŸ‡¬ğŸ‡§|GD|ğŸ‡¬ğŸ‡©|GE|ğŸ‡¬ğŸ‡ª|GH|ğŸ‡¬ğŸ‡­|GM|ğŸ‡¬ğŸ‡²|GN|ğŸ‡¬ğŸ‡³|GQ|ğŸ‡¬ğŸ‡¶|GR|ğŸ‡¬ğŸ‡·|GT|ğŸ‡¬ğŸ‡¹|GW|ğŸ‡¬ğŸ‡¼|GY|ğŸ‡¬ğŸ‡¾|HN|ğŸ‡­ğŸ‡³|HR|ğŸ‡­ğŸ‡·|HT|ğŸ‡­ğŸ‡¹|HU|ğŸ‡­ğŸ‡º|ID|ğŸ‡®ğŸ‡©|IE|ğŸ‡®ğŸ‡ª|IL|ğŸ‡®ğŸ‡±|IN|ğŸ‡®ğŸ‡³|IQ|ğŸ‡®ğŸ‡¶|IS|ğŸ‡®ğŸ‡¸|IT|ğŸ‡®ğŸ‡¹|JM|ğŸ‡¯ğŸ‡²|JO|ğŸ‡¯ğŸ‡´|JP|ğŸ‡¯ğŸ‡µ|KE|ğŸ‡°ğŸ‡ª|KG|ğŸ‡°ğŸ‡¬|KH|ğŸ‡°ğŸ‡­|KI|ğŸ‡°ğŸ‡®|KM|ğŸ‡°ğŸ‡²|KN|ğŸ‡°ğŸ‡³|KR|ğŸ‡°ğŸ‡·|KW|ğŸ‡°ğŸ‡¼|KZ|ğŸ‡°ğŸ‡¿|LA|ğŸ‡±ğŸ‡¦|LB|ğŸ‡±ğŸ‡§|LC|ğŸ‡±ğŸ‡¨|LI|ğŸ‡±ğŸ‡®|LK|ğŸ‡±ğŸ‡°|LR|ğŸ‡±ğŸ‡·|LS|ğŸ‡±ğŸ‡¸|LT|ğŸ‡±ğŸ‡¹|LU|ğŸ‡±ğŸ‡º|LV|ğŸ‡±ğŸ‡»|LY|ğŸ‡±ğŸ‡¾|MA|ğŸ‡²ğŸ‡¦|MC|ğŸ‡²ğŸ‡¨|MD|ğŸ‡²ğŸ‡©|ME|ğŸ‡²ğŸ‡ª|MG|ğŸ‡²ğŸ‡¬|MH|ğŸ‡²ğŸ‡­|MK|ğŸ‡²ğŸ‡°|ML|ğŸ‡²ğŸ‡±|MM|ğŸ‡²ğŸ‡²|MN|ğŸ‡²ğŸ‡³|MR|ğŸ‡²ğŸ‡·|MT|ğŸ‡²ğŸ‡¹|MU|ğŸ‡²ğŸ‡º|MV|ğŸ‡²ğŸ‡»|MW|ğŸ‡²ğŸ‡¼|MX|ğŸ‡²ğŸ‡½|MY|ğŸ‡²ğŸ‡¾|MZ|ğŸ‡²ğŸ‡¿|NA|ğŸ‡³ğŸ‡¦|NE|ğŸ‡³ğŸ‡ª|NG|ğŸ‡³ğŸ‡¬|NI|ğŸ‡³ğŸ‡®|NL|ğŸ‡³ğŸ‡±|NO|ğŸ‡³ğŸ‡´|NP|ğŸ‡³ğŸ‡µ|NR|ğŸ‡³ğŸ‡·|NZ|ğŸ‡³ğŸ‡¿|OM|ğŸ‡´ğŸ‡²|PA|ğŸ‡µğŸ‡¦|PE|ğŸ‡µğŸ‡ª|PG|ğŸ‡µğŸ‡¬|PH|ğŸ‡µğŸ‡­|PK|ğŸ‡µğŸ‡°|PL|ğŸ‡µğŸ‡±|PS|ğŸ‡µğŸ‡¸|PT|ğŸ‡µğŸ‡¹|PW|ğŸ‡µğŸ‡¼|PY|ğŸ‡µğŸ‡¾|QA|ğŸ‡¶ğŸ‡¦|RO|ğŸ‡·ğŸ‡´|RS|ğŸ‡·ğŸ‡¸|RW|ğŸ‡·ğŸ‡¼|SA|ğŸ‡¸ğŸ‡¦|SB|ğŸ‡¸ğŸ‡§|SC|ğŸ‡¸ğŸ‡¨|SD|ğŸ‡¸ğŸ‡©|SE|ğŸ‡¸ğŸ‡ª|SG|ğŸ‡¸ğŸ‡¬|SI|ğŸ‡¸ğŸ‡®|SK|ğŸ‡¸ğŸ‡°|SL|ğŸ‡¸ğŸ‡±|SM|ğŸ‡¸ğŸ‡²|SN|ğŸ‡¸ğŸ‡³|SO|ğŸ‡¸ğŸ‡´|SR|ğŸ‡¸ğŸ‡·|SS|ğŸ‡¸ğŸ‡¸|ST|ğŸ‡¸ğŸ‡¹|SV|ğŸ‡¸ğŸ‡»|SZ|ğŸ‡¸ğŸ‡¿|TD|ğŸ‡¹ğŸ‡©|TG|ğŸ‡¹ğŸ‡¬|TH|ğŸ‡¹ğŸ‡­|TJ|ğŸ‡¹ğŸ‡¯|TL|ğŸ‡¹ğŸ‡±|TM|ğŸ‡¹ğŸ‡²|TN|ğŸ‡¹ğŸ‡³|TO|ğŸ‡¹ğŸ‡´|TR|ğŸ‡¹ğŸ‡·|TT|ğŸ‡¹ğŸ‡¹|TV|ğŸ‡¹ğŸ‡»|TW|ğŸ‡¹ğŸ‡¼|TZ|ğŸ‡¹ğŸ‡¿|UA|ğŸ‡ºğŸ‡¦|UG|ğŸ‡ºğŸ‡¬|US|ğŸ‡ºğŸ‡¸|UY|ğŸ‡ºğŸ‡¾|UZ|ğŸ‡ºğŸ‡¿|VA|ğŸ‡»ğŸ‡¦|VC|ğŸ‡»ğŸ‡¨|VN|ğŸ‡»ğŸ‡³|VU|ğŸ‡»ğŸ‡º|WS|ğŸ‡¼ğŸ‡¸|YE|ğŸ‡¾ğŸ‡ª|ZA|ğŸ‡¿ğŸ‡¦|ZM|ğŸ‡¿ğŸ‡²|ZW|ğŸ‡¿ğŸ‡¼
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/chatgpt.svg

  - name: MicroSoft
    <<: *pr_groups
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/microsoft.svg

  - name: Apple
    <<: *pr_groups
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/apple.svg

  - name: Steam
    <<: *pr_groups
    icon: https://clash-verge-rev.github.io/assets/icons/steam.svg

  - name: å¹¿å‘Šè¿‡æ»¤
    <<: *pr_groups
    proxies:
      - REJECT
      - DIRECT
      - èŠ‚ç‚¹é€‰æ‹©
    include-all: false
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/bug.svg

  - name: æ¼ç½‘ä¹‹é±¼
    <<: *pr_groups
    icon: https://fastly.jsdelivr.net/gh/clash-verge-rev/clash-verge-rev.github.io@main/docs/assets/icons/fish.svg

rule-providers:
  anti-ad-clash:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-clash.yaml
    path: ./ruleset/anti-ad-clash.yaml
  clash-rules-ad:
    type: http
    format: yaml
    interval: 86400
    behavior: domain
    url: https://raw.githubusercontent.com/Loyalsoldier/clash-rules/release/reject.txt
    path: ./ruleset/clash-rules-ad.yaml
  BanProgramAD:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: https://github.com/ACL4SSR/ACL4SSR/raw/master/Clash/Providers/BanProgramAD.yaml
    path: ./ruleset/BanProgramAD.yaml
  applications:
    type: http
    format: yaml
    interval: 86400
    behavior: classical
    url: https://fastly.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/applications.txt
    path: ./ruleset/applications.yaml
  proxy:
    type: http
    behavior: domain
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/proxy.txt"
    path: ./ruleset/proxy.yaml
    interval: 86400
  lancidr:
    type: http
    behavior: ipcidr
    url: "https://cdn.jsdelivr.net/gh/Loyalsoldier/clash-rules@release/lancidr.txt"
    path: ./ruleset/lancidr.yaml
    interval: 86400